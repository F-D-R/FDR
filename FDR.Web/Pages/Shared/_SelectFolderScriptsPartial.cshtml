<script>
    $(function () {
        $('[data-bs-target="#FolderPopup"]').on('click', function (e) {
            let source = $(e.target).attr('id').replace(/select/i, "");
            $('#source').val(source);

            let folder = $('#' + source).val();
            $.ajax({ url: `/Folder/Folder?folder=${encodeURIComponent(folder)}`, type: 'GET', complete: function (res) { $('#SelectedFolder').val(res.responseText); } });
            $('#Drives').load(`/Folder/Drives?folder=${encodeURIComponent(folder)}`);
            $('#Subfolders').load(`/Folder/Subfolders?folder=${encodeURIComponent(folder)}`);
        });
    })

    $(function () {
        $('#SaveFolder').on('click', function () {
            $('#' + $('#source').val()).val($('#SelectedFolder').val())
        });
    })
</script>
